/* === 1. BLUEPRINT GRID BACKGROUND === */
body::before {
    content: ''; position: fixed; inset: 0; z-index: -2; pointer-events: none;
    background-image: linear-gradient(rgba(56, 189, 248, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(56, 189, 248, 0.1) 1px, transparent 1px);
    background-size: 2rem 2rem; animation: grid-pan 60s linear infinite;
}
.dark body::before {
    background-image: linear-gradient(rgba(255, 255, 255, 0.06) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.06) 1px, transparent 1px);
}
@keyframes grid-pan { from { background-position: 0 0; } to { background-position: 2rem 2rem; } }

/* === 2. ANIMATED GRADIENT === */
.bg-animated-gradient {
    position: absolute; inset: 0; z-index: -1;
    background: linear-gradient(135deg, #f5f7fa, #c3cfe2, #f5f7fa, #e0eafc);
    background-size: 400% 400%; animation: gradient-flow 15s ease infinite;
}
.dark .bg-animated-gradient {
    background: linear-gradient(135deg, #030712, #111827, #030712, #1f2937);
    background-size: 400% 400%; animation: gradient-flow 20s ease infinite;
}
@keyframes gradient-flow { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

/* === 3. INTERACTIVE DIAGRAM STYLES (MARCHING ANTS EFFECT) === */

/* Box appearance */
.diagram-box {
    opacity: 0;
    transition: opacity 0.4s ease-out;
}
.diagram-box.is-visible {
    opacity: 1;
}

/* Arrow Base Styles */
.diagram-arrow {
    stroke: #38bdf8;
    stroke-width: 4;
    fill: none;
    stroke-linecap: round;
    stroke-dasharray: 8; /* Розмір пунктиру */
    opacity: 0; /* Початково невидима */
    transition: opacity 0.5s ease-in; /* Плавна поява */
}

/* Клас, що запускає анімацію стрілки */
.diagram-arrow.is-drawing {
    opacity: 1;
    /* Запускаємо анімацію "біжучих мурах" */
    animation: marching-ants 20s linear infinite;
}

/*
  =================================================
  == ОСЬ ТУТ НОВА АНІМАЦІЯ ==
  Анімуємо stroke-dashoffset від великого значення до 0,
  щоб створити ефект безперервного руху.
  =================================================
*/
@keyframes marching-ants {
    from { stroke-dashoffset: 1000; }
    to { stroke-dashoffset: 0; }
}


/* === 4. OTHER STYLES (Bento, etc.) === */
.glass { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(8px); }
.dark .glass { background: rgba(31, 41, 55, 0.1); }
.hover-lift { transition: transform 0.2s ease-out, box-shadow 0.2s ease-out; }
.hover-lift:hover { transform: translateY(-8px); box-shadow: 0 10px 25px rgba(0,0,0,0.07); }
.dark .hover-lift:hover { box-shadow: 0 10px 25px rgba(0,0,0,0.25); }
.focus-ring:focus-visible { outline: 3px solid rgba(14, 165, 233, 0.18); outline-offset: 2px; border-radius: .5rem; }
.dark .neon-glow-sky { filter: drop-shadow(0 0 10px rgba(56, 189, 248, 0.7)) drop-shadow(0 0 20px rgba(56, 189, 248, 0.3)); }